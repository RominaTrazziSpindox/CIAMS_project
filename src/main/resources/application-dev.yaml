# ============================================
# SPRING BOOT - DEVELOPMENT CONFIGURATION (DEV)
# ============================================
# Environment: Development
# Database: PostgreSQL (localhost)
# Purpose: Local development setup with schema auto-update
# and auto-loading of mock data via data.sql
# ============================================

spring:

  config:
    import: optional:file:.env.dev[.properties]

  # --------------------------------------------
  # JDBC connection details for PostgreSQL
  # --------------------------------------------
  datasource:
    url: jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
    username: ${DB_ADMIN_USERNAME}
    password: ${DB_ADMIN_PASSWORD}
    # HikariCP: default high-performance connection pool used by Spring Boot.
    hikari:
      maximum-pool-size: 10
      minimum-idle: 2

  # --------------------------------------------
  # JPA and Hibernate setup
  # --------------------------------------------
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      # Automatically updates DB schema to match entity definitions (for dev environment ONLY).
      ddl-auto: update
    # Logs SQL queries generated by Hibernate to the console (for debugging)
    show-sql: true
    # Keeps open the JPA session right after the service layer execution.
    open-in-view: false
    properties:
      hibernate:
        # --------------------------------------------
        # Naming strategy
        # Automatically converts Java's camelCase field names
        # into PostgreSQL-compatible snake_case column names.
        # Example: productName â†’ product_name
        # --------------------------------------------
        naming:
          physical-strategy: org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
        # Pretty-print SQL statements in the console for better readability
        format_sql: true
        jdbc:
          # Ensure that timestamps are stored and read in UTC
          time_zone: UTC

  # --------------------------------------------
  # SQL initialization configuration
  # --------------------------------------------
  sql:
    init:
      mode: always
      schema-locations: classpath:db/schema.sql
      data-locations: classpath:db/data.sql


# ============================================
# LOGGING CONFIGURATION
# ============================================
# Adjusts log verbosity for various packages
# "debug" and "trace" provide detailed output
# for Hibernate and SQL queries, ideal for learning
# and debugging ORM interactions.
# ============================================
logging:
  level:
    root: info                            # Default global log level
    org.springframework.web: error        # Suppress noisy web logs
    org.hibernate: error                  # General Hibernate logs (entity lifecycle, etc.)
    org.hibernate.SQL: debug              # Logs the actual SQL statements executed
    org.hibernate.orm.jdbc.bind: trace    # Logs parameter bindings (shows query values)
    org.springframework.cache: debug      # Cache logs